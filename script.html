<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/xdoc/script.xml at 05 December 2023
 | Rendered using Apache Maven Fluido Skin 1.10.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="The MyBatis Team" />
    <title>MyBatis Migrations &#x2013; MyBatis Migrations | Migrate > script</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.10.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.10.0.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>MyBatis Migrations</h2>
</div>
</div>
          <div class="pull-right"><a href="../" id="bannerRight" title="MyBatis logo"><img src="../images/mybatis-logo.png"  alt="MyBatis logo"/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 05 December 2023<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.3.11</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Migrations</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="migrate.html" title="The 'migrate' Command"><span class="icon-chevron-down"></span>The 'migrate' Command</a>
     <ul class="nav nav-list">
      <li><a href="init.html" title="init"><span class="none"></span>init</a></li>
      <li><a href="bootstrap.html" title="bootstrap"><span class="none"></span>bootstrap</a></li>
      <li><a href="new.html" title="new"><span class="none"></span>new</a></li>
      <li><a href="status.html" title="status"><span class="none"></span>status</a></li>
      <li><a href="updown.html" title="up, down"><span class="none"></span>up, down</a></li>
      <li><a href="version.html" title="version"><span class="none"></span>version</a></li>
      <li><a href="pending.html" title="pending"><span class="none"></span>pending</a></li>
      <li><a href="redo.html" title="redo"><span class="none"></span>redo</a></li>
      <li class="active"><a href="#"><span class="none"></span>script</a></li>
      <li><a href="shortcuts.html" title="Command Shortcuts"><span class="none"></span>Command Shortcuts</a></li>
      <li><a href="custom-loader.html" title="Custom MigrationLoader"><span class="none"></span>Custom MigrationLoader</a></li>
     </ul></li>
    <li><a href="hooks.html" title="Migration Hooks"><span class="none"></span>Migration Hooks</a></li>
    <li><a href="runtime-migration.html" title="Runtime Schema Migration"><span class="none"></span>Runtime Schema Migration</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >


  
    <section>
<h2><a name="The_.27script.27_command"></a>The 'script' command</h2>
      
<p>While we developers wish we had unlimited access to every environment, the unfortunate truth is that we don&#x2019;t.
      Often it&#x2019;s the very production environment that we&#x2019;re targeting that we don&#x2019;t have access to. Someone else, a DBA
      or Change Management team will need to apply any changes. However, we don&#x2019;t want this to be an excuse to not use a
      good, automated change management tool.</p>

      
<p>MyBatis Migrations provides the <b>script</b> command to generate a script that can migrate a schema from one
      version to another. As mentioned above, this will likely always be in an upward direction, but the script command
      does also support generating undo scripts (just in case you&#x2019;re so unfortunate that you don&#x2019;t even have access to
      central development databases!).</p>

      
<p>The script command is quite simple. It takes two version numbers as parameters. Think of it as generating a
      script to apply all of the identified versions in the order specified (the lower version is exclusive and the
      higher version is inclusive).
      For example, given the following:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate status
ID             Applied At          Description
==================================================================
20090802210445 2009-08-04 22:51:17 create changelog
20090804225207 2009-08-04 22:51:17 create author table
20090804225328 2009-08-05 24:55:23 create blog table
20090804225333    ...pending...    create post table</pre></div>

      
<p>If we need to generate a &#x201c;do&#x201d; script to apply the last two versions above, we&#x2019;d run the following command:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate script 20090804225207 20090804225333 &gt; do.sql</pre></div>

      
<p>The script command outputs to stdout, so you can let it print to the console, or pipe it to a file or command.</p>

      
<p>To generate the corresponding &#x201c;undo&#x201d; script, simply specify the version numbers in the opposite order:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate script 20090804225333 20090804225207 &gt; undo.sql</pre></div>

      
<p>To generate a script which includes the first version, specify '0' as the lower version:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate script 0 20090804225207 &gt; do.sql</pre></div>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate script 20090804225207 0 &gt; undo.sql</pre></div>

      
<p>Since version 3.2.1, two handy shortcut parameters <b>pending</b> and <b>pending_undo</b> were added.</p>

      
<p>In the above example, only the last migration is pending, so the command below:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate script pending</pre></div>

      
<p>is equivalent to the following:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate script 20090804225328 20090804225333</pre></div>

      
<p>Similary, the command below:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate script pending_undo</pre></div>

      
<p>is equivalent to the following:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate script 20090804225333 20090804225328</pre></div>

    </section>
  


        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2010&#x2013;2023
<a href="https://www.mybatis.org/">MyBatis.org</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
