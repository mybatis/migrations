<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/xdoc/init.xml at 05 December 2023
 | Rendered using Apache Maven Fluido Skin 1.10.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="The MyBatis Team" />
    <title>MyBatis Migrations &#x2013; MyBatis Migrations | Migrate > Init</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.10.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.10.0.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>MyBatis Migrations</h2>
</div>
</div>
          <div class="pull-right"><a href="../" id="bannerRight" title="MyBatis logo"><img src="../images/mybatis-logo.png"  alt="MyBatis logo"/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 05 December 2023<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.3.11</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Migrations</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="migrate.html" title="The 'migrate' Command"><span class="icon-chevron-down"></span>The 'migrate' Command</a>
     <ul class="nav nav-list">
      <li class="active"><a href="#"><span class="none"></span>init</a></li>
      <li><a href="bootstrap.html" title="bootstrap"><span class="none"></span>bootstrap</a></li>
      <li><a href="new.html" title="new"><span class="none"></span>new</a></li>
      <li><a href="status.html" title="status"><span class="none"></span>status</a></li>
      <li><a href="updown.html" title="up, down"><span class="none"></span>up, down</a></li>
      <li><a href="version.html" title="version"><span class="none"></span>version</a></li>
      <li><a href="pending.html" title="pending"><span class="none"></span>pending</a></li>
      <li><a href="redo.html" title="redo"><span class="none"></span>redo</a></li>
      <li><a href="script.html" title="script"><span class="none"></span>script</a></li>
      <li><a href="shortcuts.html" title="Command Shortcuts"><span class="none"></span>Command Shortcuts</a></li>
      <li><a href="custom-loader.html" title="Custom MigrationLoader"><span class="none"></span>Custom MigrationLoader</a></li>
     </ul></li>
    <li><a href="hooks.html" title="Migration Hooks"><span class="none"></span>Migration Hooks</a></li>
    <li><a href="runtime-migration.html" title="Runtime Schema Migration"><span class="none"></span>Runtime Schema Migration</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >


  
    <section>
<h2><a name="The_.27init.27_command"></a>The 'init' command</h2>
      
<p>The <b>init</b> command initializes a new 'migration path', also called a 'repository' (of migration scripts). Regardless of whether your working with a new database or an existing one, you'll run init to create the workspace in which you'll place everything you need to manage database
change. Running this command will create the directory specified by the <code>--path</code> option (which is the current working directory by default).
Here's an example of running the init command:</p>

      
<div class="source"><pre class="prettyprint">/$ migrate --path=/home/cbegin/testdb init</pre></div>

      
<p>If I was already in the <code>/home/cbegin/testdb</code> directory, I could simply run:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate init</pre></div>

      
<p>When the command is completed, the directory will contain the following sub-directories:</p>

      
<p>Since version 3.2.1, you can change the default timestamp based file prefix to number sequence by specifying <code>--idpattern</code> option. With the following command, for example, the prefix of the generated scripts will be three digit zero-padded number like '001'.</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate --idpattern=000 init</pre></div>

      
<p>Instead of specifying the pattern as a command line argument, you can set it in the configuration file <code>$MIGRATIONS_HOME/migration.properties</code> as follows.</p>

      
<div class="source"><pre class="prettyprint"># Example of migration.properties
idpattern=000</pre></div>

      <section>
<h3><a name="a..2Fdrivers"></a>./drivers</h3>
        
<p>Place your JDBC driver .jar or .zip files in this directory. Upon running a migration, the drivers will be dynamically loaded.</p>
      </section>

      <section>
<h3><a name="a..2Fenvironments"></a>./environments</h3>
        
<p>
  In the environments folder you will find .properties files that represent your database instances. By default a
  <b>development.properties</b>
  file is created for you to configure your development time database properties. You can also create test.properties
  and production.properties files. Details about the properties themselves follow later in this document. The
  environment can be specified when running a migration by using the
  <code>--env=&lt;environment&gt;</code>
  option (without the path or &quot;.properties&quot; part).
</p>
  
<p>The default environment is &quot;development&quot;. The properties file is self documented, but here it is for reference:</p>

        
<div class="source"><pre class="prettyprint">## Base time zone to ensure times are consistent across machines
time_zone=GMT+0:00
## The character set that scripts are encoded with
# script_char_set=UTF-8
## JDBC connection properties.
driver=
url=
username=
password=
# Name of the table that tracks changes to the database
changelog=CHANGELOG
# If set to true, each statement is isolated
# in its own transaction.  Otherwise the entire
# script is executed in one transaction.
auto_commit=false
# This controls how statements are delimited.
# By default statements are delimited by an
# end of line semicolon.  Some databases may
# (e.g. MS SQL Server) may require a full line
# delimiter such as GO.
delimiter=;
full_line_delimiter=false
# This ignores the line delimiters and
# simply sends the entire script at once.
# Use with JDBC drivers that can accept large
# blocks of delimited text at once.
send_full_script=true
# If set to false, warnings from the database
# will interrupt migrations.
ignore_warnings=true
# Custom driver path to avoid copying your drivers
# driver_path=</pre></div>
        
<p>Since version 3.3.6, it is possible for users to override environment settings via environment variables or system properties. For example, instead of writing the database password in the environment file, you can declare an environment variable <code>MIGRATIONS_PASSWORD</code>.</p>
        <section>
<h4><a name="Database_specific_information"></a>Database specific information</h4>
        <section>
<h5><a name="MySQL"></a>MySQL</h5>
        
<ul>
          
<li><code>send_full_script</code> must be set to <code>false</code> to execute a script with multiple statements.</li>
        </ul>
      </section></section></section>

      <section>
<h3><a name="a..2Fscripts"></a>./scripts</h3>
        
<p>
  This directory contains your migration SQL files. These are the files that contain your DDL to both upgrade and
  downgrade your database structure. By default, the directory will contain the script to create the
  <b>changelog</b>
  table, plus one empty example migration script. To create a new migration script, use the
  <b>&quot;new&quot;</b>
  command. To run all pending migrations, use the
  <b>&quot;up&quot;</b>
  command. To undo the last migration applied, use the
  <b>&quot;down&quot;</b>
  command etc.
</p>
      </section>
    </section>
  


        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2010&#x2013;2023
<a href="https://www.mybatis.org/">MyBatis.org</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
