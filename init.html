<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M19 from src/site/xdoc/init.xml at 10 Aug 2024
 | Rendered using Apache Maven Fluido Skin 2.0.0-M9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M19" />
    <meta name="author" content="The MyBatis Team" />
    <title>MyBatis Migrations | Migrate &gt; Init – MyBatis Migrations</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M9.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"><div id="bannerRight"><h1><a href="https://blog.mybatis.org/" class="externalLink"><img class="imageLink" src="../images/mybatis-logo.png" alt="MyBatis logo" /> MyBatis</a></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 10 Aug 2024<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.4.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Migrations</li>
    <li><a href="index.html">Introduction</a></li>
    <li><a href="installation.html">Installation</a></li>
    <li><a href="migrate.html"><span class="icon-chevron-down"></span>The &apos;migrate&apos; Command</a>
     <ul class="nav nav-list">
      <li class="active"><a>init</a></li>
      <li><a href="bootstrap.html">bootstrap</a></li>
      <li><a href="new.html">new</a></li>
      <li><a href="status.html">status</a></li>
      <li><a href="updown.html">up, down</a></li>
      <li><a href="version.html">version</a></li>
      <li><a href="pending.html">pending</a></li>
      <li><a href="redo.html">redo</a></li>
      <li><a href="script.html">script</a></li>
      <li><a href="shortcuts.html">Command Shortcuts</a></li>
      <li><a href="custom-loader.html">Custom MigrationLoader</a></li>
     </ul></li>
    <li><a href="hooks.html">Migration Hooks</a></li>
    <li><a href="runtime-migration.html">Runtime Schema Migration</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">


  
    <section><a id="The_.27init.27_command"></a>
<h1>The 'init' command</h1>
      
<p>The <strong>init</strong> command initializes a new 'migration path', also called a 'repository' (of migration scripts). Regardless of whether your working with a new database or an existing one, you'll run init to create the workspace in which you'll place everything you need to manage database
change. Running this command will create the directory specified by the <code>--path</code> option (which is the current working directory by default).
Here's an example of running the init command:</p>

      
<pre class="prettyprint"><code>/$ migrate --path=/home/cbegin/testdb init</code></pre>

      
<p>If I was already in the <code>/home/cbegin/testdb</code> directory, I could simply run:</p>

      
<pre class="prettyprint"><code>/home/cbegin/testdb$ migrate init</code></pre>

      
<p>When the command is completed, the directory will contain the following sub-directories:</p>

      
<p>Since version 3.2.1, you can change the default timestamp based file prefix to number sequence by specifying <code>--idpattern</code> option. With the following command, for example, the prefix of the generated scripts will be three digit zero-padded number like '001'.</p>

      
<pre class="prettyprint"><code>/home/cbegin/testdb$ migrate --idpattern=000 init</code></pre>

      
<p>Instead of specifying the pattern as a command line argument, you can set it in the configuration file <code>$MIGRATIONS_HOME/migration.properties</code> as follows.</p>

      
<pre class="prettyprint"><code># Example of migration.properties
idpattern=000</code></pre>

      <section><a id="a..2Fdrivers"></a>
<h2>./drivers</h2>
        
<p>Place your JDBC driver .jar or .zip files in this directory. Upon running a migration, the drivers will be dynamically loaded.</p>
      </section>

      <section><a id="a..2Fenvironments"></a>
<h2>./environments</h2>
        
<p>
  In the environments folder you will find .properties files that represent your database instances. By default a
  <strong>development.properties</strong>
  file is created for you to configure your development time database properties. You can also create test.properties
  and production.properties files. Details about the properties themselves follow later in this document. The
  environment can be specified when running a migration by using the
  <code>--env=&lt;environment&gt;</code>
  option (without the path or &quot;.properties&quot; part).
</p>
  
<p>The default environment is &quot;development&quot;. The properties file is self documented, but here it is for reference:</p>

        
<pre class="prettyprint"><code>## Base time zone to ensure times are consistent across machines
time_zone=GMT+0:00
## The character set that scripts are encoded with
# script_char_set=UTF-8
## JDBC connection properties.
driver=
url=
username=
password=
# Name of the table that tracks changes to the database
changelog=CHANGELOG
# If set to true, each statement is isolated
# in its own transaction.  Otherwise the entire
# script is executed in one transaction.
auto_commit=false
# This controls how statements are delimited.
# By default statements are delimited by an
# end of line semicolon.  Some databases may
# (e.g. MS SQL Server) may require a full line
# delimiter such as GO.
delimiter=;
full_line_delimiter=false
# This ignores the line delimiters and
# simply sends the entire script at once.
# Use with JDBC drivers that can accept large
# blocks of delimited text at once.
send_full_script=true
# If set to false, warnings from the database
# will interrupt migrations.
ignore_warnings=true
# Custom driver path to avoid copying your drivers
# driver_path=</code></pre>
        
<p>Since version 3.3.6, it is possible for users to override environment settings via environment variables or system properties. For example, instead of writing the database password in the environment file, you can declare an environment variable <code>MIGRATIONS_PASSWORD</code>.</p>
        <section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2010–2024
<a href="https://www.mybatis.org/">MyBatis.org</a>
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>