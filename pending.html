<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/xdoc/pending.xml at 05 December 2023
 | Rendered using Apache Maven Fluido Skin 1.10.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="The MyBatis Team" />
    <title>MyBatis Migrations &#x2013; MyBatis Migrations | Migrate > pending</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.10.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.10.0.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>MyBatis Migrations</h2>
</div>
</div>
          <div class="pull-right"><a href="../" id="bannerRight" title="MyBatis logo"><img src="../images/mybatis-logo.png"  alt="MyBatis logo"/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 05 December 2023<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.3.11</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Migrations</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="migrate.html" title="The 'migrate' Command"><span class="icon-chevron-down"></span>The 'migrate' Command</a>
     <ul class="nav nav-list">
      <li><a href="init.html" title="init"><span class="none"></span>init</a></li>
      <li><a href="bootstrap.html" title="bootstrap"><span class="none"></span>bootstrap</a></li>
      <li><a href="new.html" title="new"><span class="none"></span>new</a></li>
      <li><a href="status.html" title="status"><span class="none"></span>status</a></li>
      <li><a href="updown.html" title="up, down"><span class="none"></span>up, down</a></li>
      <li><a href="version.html" title="version"><span class="none"></span>version</a></li>
      <li class="active"><a href="#"><span class="none"></span>pending</a></li>
      <li><a href="redo.html" title="redo"><span class="none"></span>redo</a></li>
      <li><a href="script.html" title="script"><span class="none"></span>script</a></li>
      <li><a href="shortcuts.html" title="Command Shortcuts"><span class="none"></span>Command Shortcuts</a></li>
      <li><a href="custom-loader.html" title="Custom MigrationLoader"><span class="none"></span>Custom MigrationLoader</a></li>
     </ul></li>
    <li><a href="hooks.html" title="Migration Hooks"><span class="none"></span>Migration Hooks</a></li>
    <li><a href="runtime-migration.html" title="Runtime Schema Migration"><span class="none"></span>Runtime Schema Migration</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >


  
    <section>
<h2><a name="The_.27pending.27_command"></a>The 'pending' command</h2>
      
<p>Sometimes when working with a team of people, or with multiple teams of people, it&#x2019;s possible that more than one
      change to the database can be made at a time. Past solutions to this problem have been to centralize the management
      or responsibility for change to one person or team. But this creates bureaucracy and slows down the development process.
      It also hurts automation and continuous integration. Therefore we need a better approach.</p>

      
<p>MyBatis Migrations simply allows this situation to occur, but makes it very obvious that it has happened.
      Then the teams can review the situation, downgrade their schemas and re-run the migrations in order, and re-assess
      the situation. It allows teams to work autonomously, while encouraging communication, team work and good source
      control practices. When someone creates migration in another workspace before you, but commits to the source
      control system later than you, you&#x2019;ll end up with an orphaned pending migration. They&#x2019;re easy to spot with the status command:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate status
ID             Applied At          Description
==================================================================
20090802210445 2009-08-04 22:51:17 create changelog
20090804225207 2009-08-04 22:51:17 create author table
20090804225328    ...pending...    create blog table
20090804225333 2009-08-04 22:51:17 create post table</pre></div>

      
<p>MyBatis Migrations will <b>not</b> run this orphaned migration simply by running the <b>up</b> command.
      Instead, you&#x2019;d have to downgrade to the point just before the orphaned migration, then run <b>up</b> to run all of
      the migrations in order. This is the <b>safest</b> and recommended approach.</p>

      
<p>However, if you and the other team review the change, and decide it&#x2019;s completely isolated and not a conflicting
      change, then there is a way to run the pending migration(s) out of order. The <b>pending</b> command does just
      that. It runs all pending migrations regardless of their order or position in the status log. So if we were to run
      the pending command given the situation above, the results would be as we expect:</p>

      
<div class="source"><pre class="prettyprint">/home/cbegin/testdb$ migrate pending

/home/cbegin/testdb$ migrate status
ID             Applied At          Description
==================================================================
20090802210445 2009-08-04 22:51:17 create changelog
20090804225207 2009-08-04 22:51:17 create author table
20090804225328 2009-08-05 24:55:23 create blog table
20090804225333 2009-08-04 22:51:17 create post table</pre></div>

      
<p>Even after the fact, you&#x2019;ll be able to identify any migrations run in this way, as the applied date will give
      them away. An out-of-order applied date is clear indication that a migration was run out of order. No surprises!</p>

      
<p>Some commands like <b>pending</b> and <b>down</b> are highly unlikely to ever be needed in production. By the time you
      promote migrations to production, you&#x2019;ve hopefully decided on your final schema and tested and approved the schema
      for release. While they won&#x2019;t be used in production, they are highly valuable during the development process.
      Once you get used to the idea, you won&#x2019;t be able to work without it again.</p>
    </section>
  


        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2010&#x2013;2023
<a href="https://www.mybatis.org/">MyBatis.org</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
